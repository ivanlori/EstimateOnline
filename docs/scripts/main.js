"use strict";!function(){var e=document.getElementById("js-add-btn"),t=document.querySelector(".js-estimate-total"),n=document.querySelector(".js-estimate-subtotal"),s=document.querySelector(".js-discount"),a=document.querySelector(".js-select-icon"),r=document.querySelector(".js-select"),c=document.getElementById("js-logo-image"),o=document.querySelector(".js-logo-wrapper"),i=document.querySelector(".js-datepicker"),l=document.querySelector(".js-vat"),d=document.getElementsByClassName("js-image-blank"),u=(document.querySelector(".js-tooltip"),document.querySelector(".js-vat-display")),m=document.querySelector(".js-company-address"),p=document.getElementById("js-print-btn"),v=document.getElementById("js-unity-product-0"),y=document.getElementById("js-amount-product-0"),L=document.getElementById("js-quantity-product-0"),g=0,j=function(e){var t=document.getElementById("js-image-blank"),n=t.getContext("2d"),s=new Image;s.onload=function(){s.height>150?t.height=80:t.height=s.height,t.width=s.width,n.drawImage(s,0,0)},s.src=URL.createObjectURL(e.target.files[0]),t.classList.remove("hidden")},_=function(e){var t={},n={},s={},a={};0===e?(t=document.getElementById("js-select-product-0"),n=document.getElementById("js-unity-product-0"),s=document.getElementById("js-amount-product-0"),a=document.getElementById("js-quantity-product-0")):(t=document.getElementById("js-select-product-"+e),n=document.getElementById("js-unity-product-"+e),s=document.getElementById("js-amount-product-"+e),a=document.getElementById("js-quantity-product-"+e));var r=parseInt(n.value),c=parseInt(a.value),o=parseInt(s.value),i=!1;return"0"===t.value?(t.classList.add("error"),i=!0):(t.classList.remove("error"),i=!1),isNaN(r)||""===n.value?(n.classList.add("error"),i=!0):(n.classList.remove("error"),i=!1),isNaN(c)||""===a.value?(a.classList.add("error"),i=!0):(a.classList.remove("error"),i=!1),isNaN(o)||""===s.value?(s.classList.add("error"),i=!0):(s.classList.remove("error"),i=!1),i},E=function(e,t){return parseFloat(e).toFixed(2)*parseFloat(t).toFixed(2)},f=function(){for(var e=0,a=document.getElementsByClassName("js-input-amount"),r="",c="",o="",i="",d=0;d<a.length;d++)e+=parseFloat(a[d].value),""!==l.value&&(c=q(l),o=parseFloat(c)),""!==s.value&&(r=w(s),i=parseFloat(r)),n.innerHTML=e,t.innerHTML=e+o-i+"€"},h=function(e,t,n,s,a,r){var c=document.createElement("td"),o=document.createElement(e),i=document.createElement("span"),l=document.createElement("span");if("select"===e){i.setAttribute("class","js-select-icon select-icon icon-circle-down");var d={0:"-- Select --",1:"Service",2:"Hours",3:"Days",4:"Product"};for(var u in d)if(d.hasOwnProperty(u)){var m=document.createElement("option");m.setAttribute("value",u),m.innerHTML=d[u],o.appendChild(m)}c.appendChild(i)}return c.setAttribute("class",t),o.setAttribute("name",a),o.setAttribute("class",n),o.setAttribute("id",s),o.setAttribute("placeholder",r),o.classList.contains("js-input-amount")&&(l.setAttribute("class","amount-euro"),c.appendChild(l)),c.appendChild(o),c},b=function(e){var t=document.createElement("tr");return t.classList.add("estimate__main__table__row"),t.appendChild(h("select","js-select-wrapper estimate__main__table__row__cell small","js-select","js-select-product-"+e,"js-select-product-"+e,"productSelect"+e)),t.appendChild(h("textarea","estimate__main__table__row__cell large","js-input-description table-field","js-description-product-"+e,"productDescription"+e,"")),t.appendChild(h("input","estimate__main__table__row__cell small","js-input-unity table-field","js-unity-product-"+e,"productUnity"+e,"0.00")),t.appendChild(h("input","estimate__main__table__row__cell small","js-input-quantity table-field","js-quantity-product-"+e,"productQuantity"+e,"0")),t.appendChild(h("input","amount-cell estimate__main__table__row__cell small","js-input-amount table-field","js-amount-product-"+e,"productAmount"+e,"0.00")),t},I=function(){var e=document.getElementById("tbody");if(!_(g)){g+=1,e.appendChild(b(g));var t=(document.getElementById("js-select-product-"+g),document.getElementById("js-unity-product-"+g)),n=document.getElementById("js-quantity-product-"+g),s=document.getElementById("js-amount-product-"+g);n.addEventListener("focusout",function(){B(this,t,s),s.parentNode.classList.add("x-value")})}},B=function(e,t,n){var s=""===e.value,a=""===t.value,r=isNaN(t.value),c=isNaN(e.value),o=0;a||r?(t.classList.add("error"),o+=1):t.classList.remove("error"),s||c?(e.classList.add("error"),o+=1):e.classList.remove("error"),0===o&&(n.value=E(t.value,e.value),y.parentNode.classList.add("x-value"),f())},w=function(e){var s="",a="",r="";if(!isNaN(e.value))return e.classList.remove("error"),s=(e.value/100*n.innerHTML).toFixed(2),a=parseFloat(s),r=parseFloat(n.innerHTML),t.innerHTML=r-a+"€",s;e.classList.add("error")},q=function(e){var s="",a="",r="";return isNaN(e.value)?void e.classList.add("error"):(e.classList.remove("error"),u.innerText=e.value,s=(n.innerHTML*e.value/100).toFixed(2),r=parseFloat(s),a=parseFloat(n.innerHTML),t.innerHTML=a+r+"€",s)},N=function(e){e.classList.contains("icon-circle-down")?(e.classList.remove("icon-circle-down"),e.classList.add("icon-circle-up")):(e.classList.add("icon-circle-down"),e.classList.remove("icon-circle-up"))};m.addEventListener("focusin",function(){this.classList.add("expand")}),document.querySelector("body").addEventListener("click",function(e){var t="";e.target.classList.contains("js-select")&&(t=e.srcElement.previousElementSibling,N(t))}),r.addEventListener("focusout",function(){a.classList.contains("icon-circle-up")&&(a.classList.add("icon-circle-down"),a.classList.remove("icon-circle-up"))}),L.addEventListener("focusout",function(){B(this,v,y)}),e.addEventListener("click",function(){I()}),s.addEventListener("change",function(){w(this)}),l.addEventListener("change",function(){q(this)}),p.addEventListener("click",function(){window.print()}),flatpickr(i,{dateFormat:"d-m-Y"}),c.addEventListener("change",function(e){var t=j(e);localStorage.setItem("imgData",t),o.classList.add("x-logo-visible")});var S=localStorage.getItem("imgData");d.src="data:image/png;base64,"+S}();