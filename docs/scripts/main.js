"use strict";!function(){var e=document.getElementById("js-add-btn"),t=document.querySelector(".js-estimate-total"),n=document.querySelector(".js-estimate-subtotal"),a=document.querySelector(".js-discount"),r=document.querySelector(".js-select-icon"),s=document.querySelector(".js-select"),o=document.getElementById("js-logo-image"),i=document.querySelector(".js-logo-wrapper"),c=document.querySelector(".js-datepicker"),d=document.querySelector(".js-vat"),l=document.getElementsByClassName("js-image-blank"),u=(document.querySelector(".js-tooltip"),document.querySelector(".js-vat-display")),m=document.querySelector(".js-company-address"),p=document.getElementById("js-print-btn"),v=document.getElementById("js-unity-product-0"),y=document.getElementById("js-amount-product-0"),g=document.getElementById("js-quantity-product-0"),_=0,L=function(e){var t=document.getElementById("js-image-blank"),n=t.getContext("2d"),a=new Image;a.onload=function(){a.height>150?t.height=80:t.height=a.height,t.width=a.width,n.drawImage(a,0,0)},a.src=URL.createObjectURL(e.target.files[0]),t.classList.remove("hidden")},j=function(e){var t={},n={},a={},r={};0===e?(t=document.getElementById("js-select-product-0"),n=document.getElementById("js-unity-product-0"),a=document.getElementById("js-amount-product-0"),r=document.getElementById("js-quantity-product-0")):(t=document.getElementById("js-select-product-"+e),n=document.getElementById("js-unity-product-"+e),a=document.getElementById("js-amount-product-"+e),r=document.getElementById("js-quantity-product-"+e));var s=parseInt(n.value),o=parseInt(r.value),i=parseInt(a.value),c=!1;return"0"===t.value?(t.classList.add("error"),c=!0):(t.classList.remove("error"),c=!1),isNaN(s)||""===n.value?(n.classList.add("error"),c=!0):(n.classList.remove("error"),c=!1),isNaN(o)||""===r.value?(r.classList.add("error"),c=!0):(r.classList.remove("error"),c=!1),isNaN(i)||""===a.value?(a.classList.add("error"),c=!0):(a.classList.remove("error"),c=!1),c},f=function(e,t){return parseFloat(e).toFixed(2)*parseFloat(t).toFixed(2)},E=function(){for(var e=0,r=document.getElementsByClassName("js-input-amount"),s="",o="",i="",c="",l=0;l<r.length;l++)e+=parseFloat(r[l].value),""!==d.value&&(o=w(d),i=parseFloat(o)),""!==a.value&&(s=q(a),c=parseFloat(s)),n.innerHTML=e,t.innerHTML=e+i-c+"€"},h=function(e,t,n,a,r,s){var o=document.createElement("td"),i=document.createElement(e);if("select"===e){var c={0:"-- Select --",1:"Service",2:"Hours",3:"Days",4:"Product"};for(var d in c)if(c.hasOwnProperty(d)){var l=document.createElement("option");l.setAttribute("value",d),l.innerHTML=c[d],i.appendChild(l)}}return o.setAttribute("class",t),i.setAttribute("name",r),i.setAttribute("class",n),i.setAttribute("id",a),i.setAttribute("placeholder",s),o.appendChild(i),o},I=function(e){var t=document.createElement("tr");return t.classList.add("estimate__main__table__row"),t.appendChild(h("select","estimate__main__table__row__cell small","js-select","js-select-product-"+e,"js-select-product-"+e,"productSelect"+e)),t.appendChild(h("textarea","estimate__main__table__row__cell large","js-input-description table-field","js-description-product-"+e,"productDescription"+e,"")),t.appendChild(h("input","estimate__main__table__row__cell small","js-input-unity table-field","js-unity-product-"+e,"productUnity"+e,"0.00")),t.appendChild(h("input","estimate__main__table__row__cell small","js-input-quantity table-field","js-quantity-product-"+e,"productQuantity"+e,"0")),t.appendChild(h("input","estimate__main__table__row__cell small","js-input-amount table-field","js-amount-product-"+e,"productAmount"+e,"0.00")),t},b=function(){var e=document.getElementById("tbody");if(!j(_)){_+=1,e.appendChild(I(_));var t=(document.getElementById("js-select-product-"+_),document.getElementById("js-unity-product-"+_)),n=document.getElementById("js-quantity-product-"+_),a=document.getElementById("js-amount-product-"+_);n.addEventListener("focusout",function(){B(this,t,a)})}},B=function(e,t,n){var a=""===e.value,r=""===t.value,s=isNaN(t.value),o=isNaN(e.value);r||s?t.classList.add("error"):a||o?e.classList.add("error"):(e.classList.remove("error"),t.classList.remove("error"),n.value=f(t.value,e.value),E())},q=function(e){var a="",r="",s="";if(!isNaN(e.value))return e.classList.remove("error"),a=(e.value/100*n.innerHTML).toFixed(2),r=parseFloat(a),s=parseFloat(n.innerHTML),t.innerHTML=s-r+"€",a;e.classList.add("error")},w=function(e){var a="",r="",s="";return isNaN(e.value)?void e.classList.add("error"):(e.classList.remove("error"),u.innerText=e.value,a=(n.innerHTML*e.value/100).toFixed(2),s=parseFloat(a),r=parseFloat(n.innerHTML),t.innerHTML=r+s+"€",a)};m.addEventListener("focusin",function(){this.classList.add("expand")}),s.addEventListener("click",function(){r.classList.contains("icon-circle-down")?(r.classList.remove("icon-circle-down"),r.classList.add("icon-circle-up")):(r.classList.add("icon-circle-down"),r.classList.remove("icon-circle-up"))}),g.addEventListener("focusout",function(){B(this,v,y)}),e.addEventListener("click",function(){b()}),a.addEventListener("change",function(){q(this)}),d.addEventListener("change",function(){w(this)}),p.addEventListener("click",function(){window.print()}),flatpickr(c,{dateFormat:"d-m-Y"}),o.addEventListener("change",function(e){var t=L(e);localStorage.setItem("imgData",t),i.classList.add("x-logo-visible")});var N=localStorage.getItem("imgData");l.src="data:image/png;base64,"+N}();