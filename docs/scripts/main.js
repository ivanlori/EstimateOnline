"use strict";!function(){var e=document.getElementById("js-add-btn"),t=document.querySelector(".js-estimate-value"),n=document.querySelector(".js-discount"),a=document.getElementById("js-logo-image"),r=document.querySelector(".js-logo-wrapper"),s=document.getElementById("js-datepicker"),o=document.getElementsByClassName("js-image-blank"),d=(document.querySelector(".js-tooltip"),document.getElementById("js-print-btn")),u=document.getElementById("js-unity-product-0"),i=document.getElementById("js-amount-product-0"),c=document.getElementById("js-quantity-product-0"),l=0,m=function(e){var t=document.getElementById("js-image-blank"),n=t.getContext("2d"),a=new Image;a.onload=function(){a.height>150?t.height=80:t.height=a.height,t.width=a.width,n.drawImage(a,0,0)},a.src=URL.createObjectURL(e.target.files[0]),t.classList.remove("hidden")},p=function(e){var t={},n={},a={},r={};0===e?(t=document.getElementById("js-select-product-0"),n=document.getElementById("js-unity-product-0"),a=document.getElementById("js-amount-product-0"),r=document.getElementById("js-quantity-product-0")):(t=document.getElementById("js-select-product-"+e),n=document.getElementById("js-unity-product-"+e),a=document.getElementById("js-amount-product-"+e),r=document.getElementById("js-quantity-product-"+e));var s=parseInt(n.value),o=parseInt(r.value),d=parseInt(a.value),u=!1;return"0"===t.value?(t.classList.add("error"),u=!0):(t.classList.remove("error"),u=!1),isNaN(s)||""===n.value?(n.classList.add("error"),u=!0):(n.classList.remove("error"),u=!1),isNaN(o)||""===r.value?(r.classList.add("error"),u=!0):(r.classList.remove("error"),u=!1),isNaN(d)||""===a.value?(a.classList.add("error"),u=!0):(a.classList.remove("error"),u=!1),u},v=function(e,t){return parseInt(e)*parseInt(t)},g=function(){for(var e=0,n=document.getElementsByClassName("js-input-amount"),a=0;a<n.length;a++)e+=parseInt(n[a].value),t.innerHTML=e+"€"},_=function(e,t,n,a,r,s){var o=document.createElement("td"),d=document.createElement(e);if("select"===e){var u={0:"-- Select --",1:"Service",2:"Hours",3:"Days",4:"Product"};for(var i in u)if(u.hasOwnProperty(i)){var c=document.createElement("option");c.setAttribute("value",i),c.innerHTML=u[i],d.appendChild(c)}}return o.setAttribute("class",t),d.setAttribute("name",r),d.setAttribute("class",n),d.setAttribute("id",a),d.setAttribute("placeholder",s),o.appendChild(d),o},y=function(e){var t=document.createElement("tr");return t.classList.add("estimate__main__table__row"),t.appendChild(_("select","estimate__main__table__row__cell small","js-select","js-select-product-"+e,"js-select-product-"+e,"productSelect"+e)),t.appendChild(_("textarea","estimate__main__table__row__cell large","js-input-description","js-description-product-"+e,"productDescription"+e,"")),t.appendChild(_("input","estimate__main__table__row__cell small","js-input-unity","js-unity-product-"+e,"productUnity"+e,"0.00")),t.appendChild(_("input","estimate__main__table__row__cell small","js-input-quantity","js-quantity-product-"+e,"productQuantity"+e,"0")),t.appendChild(_("input","estimate__main__table__row__cell small","js-input-amount","js-amount-product-"+e,"productAmount"+e,"0.00")),t},j=function(){var e=document.getElementById("tbody");if(!p(l)){l+=1,e.appendChild(y(l));var t=(document.getElementById("js-select-product-"+l),document.getElementById("js-unity-product-"+l)),n=document.getElementById("js-quantity-product-"+l),a=document.getElementById("js-amount-product-"+l);n.addEventListener("focusout",function(){E(this,t,a)})}},E=function(e,t,n){var a=""===e.value,r=""===t.value,s=isNaN(t.value),o=isNaN(e.value);r||s?t.classList.add("error"):a||o?e.classList.add("error"):(e.classList.remove("error"),t.classList.remove("error"),n.value=v(t.value,e.value),g())},I=function(e){if(isNaN(e.value))e.classList.add("error");else{e.classList.remove("error");e.value,$total.innerHTML}t.innerHTML=$total.innerHTML-discountResult+"€"};c.addEventListener("focusout",function(){E(this,u,i)}),e.addEventListener("click",function(){j()}),n.addEventListener("change",function(){I(this)}),d.addEventListener("click",function(){window.print()}),flatpickr(s,{dateFormat:"d-m-Y"}),a.addEventListener("change",function(e){var t=m(e);localStorage.setItem("imgData",t),r.classList.add("x-logo-visible")});var L=localStorage.getItem("imgData");o.src="data:image/png;base64,"+L}();